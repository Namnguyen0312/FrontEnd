import{_ as v,o as a,c as r,a as t,b as c,t as u,w as I,F as g,r as k,n as S,d as $,u as y,e as A,f as h,g as f,h as V,i as w,j as T,p as L,k as N}from"./index-1f56e4ca.js";import{C as B}from"./contact.service-f6bb579a.js";const j={props:{contact:{type:Object,required:!0}}},D={class:"p-1"},F=t("strong",null,"Name:",-1),K={class:"p-1"},M=t("strong",null,"E-mail:",-1),O={class:"p-1"},E=t("strong",null,"Address:",-1),J={class:"p-1"},U=t("strong",null,"Phone:",-1),q={class:"p-1"},z=t("strong",null,"Description:",-1),H={class:"p-1"},P=t("strong",null,"Favorite Contact: ",-1),X={key:0,class:"fas fa-check"},G={key:1,class:"fas fa-times"};function Q(s,e,o,m,d,n){return a(),r("div",null,[t("div",D,[F,c(" "+u(o.contact.name),1)]),t("div",K,[M,c(" "+u(o.contact.email),1)]),t("div",O,[E,c(" "+u(o.contact.address),1)]),t("div",J,[U,c(" "+u(o.contact.phone),1)]),t("div",q,[z,c(" "+u(o.contact.description),1)]),t("div",H,[P,o.contact.favorite?(a(),r("i",X)):(a(),r("i",G))])])}const R=v(j,[["render",Q]]),W={props:{modelValue:{type:String,default:""}},emits:["submit","update:modelValue"],methods:{updateModelValue(s){this.$emit("update:modelValue",s.target.value)},submit(){this.$emit("submit")}}},Y={class:"input-group"},Z=["value"],tt={class:"input-group-append"},et=t("i",{class:"fas fa-search"},null,-1);function st(s,e,o,m,d,n){return a(),r("div",Y,[t("input",{type:"text",class:"form-control",placeholder:"Nhập thông tin cần tìm",value:o.modelValue,onInput:e[0]||(e[0]=(...i)=>n.updateModelValue&&n.updateModelValue(...i)),onKeyup:e[1]||(e[1]=I((...i)=>n.submit&&n.submit(...i),["enter"]))},null,40,Z),t("div",tt,[t("button",{class:"btn btn-outline-secondary",type:"button",onClick:e[2]||(e[2]=(...i)=>n.submit&&n.submit(...i))},[et,c(" Tìm kiếm ")])])])}const nt=v(W,[["render",st]]),ot={props:{contacts:{type:Array,default:[]},activeIndex:{type:Number,default:-1}},emits:["update:activeIndex"],methods:{updateActiveIndex(s){this.$emit("update:activeIndex",s)}}},ct={class:"list-group"},at=["onClick"];function it(s,e,o,m,d,n){return a(),r("ul",ct,[(a(!0),r(g,null,k(o.contacts,(i,p)=>(a(),r("li",{class:S(["list-group-item",{active:p===o.activeIndex}]),key:i._id,onClick:C=>n.updateActiveIndex(p)},u(i.name),11,at))),128))])}const rt=v(ot,[["render",it]]),dt=$("contacts",{state:()=>({mycontacts:[]}),actions:{async getmycontacts(){const s=y(),e=JSON.parse(JSON.stringify(await A.get(s.account._id)));this.mycontacts=e.mycontacts.map(o=>o),console.log(e),console.log(e.mycontacts)}}});const lt={setup(){const s=dt();return{AccountStore:y(),ContactStore:s}},components:{ContactCard:R,InputSearch:nt,ContactList:rt},data(){return{contacts:[],activeIndex:-1,searchText:""}},watch:{searchText(){this.activeIndex=-1}},computed:{contactStrings(){return this.contacts.map(s=>{const{name:e,email:o,address:m,phone:d,description:n}=s;return[e,o,m,d,n].join("")})},filteredContacts(){return this.searchText?this.contacts.filter((s,e)=>this.contactStrings[e].includes(this.searchText)):this.contacts},activeContact(){return this.activeIndex<0?null:this.filteredContacts[this.activeIndex]},filteredContactsCount(){return this.filteredContacts.length}},methods:{async retrieveContacts(){try{await this.ContactStore.getmycontacts(),this.contacts=this.ContactStore.mycontacts}catch(s){console.log(s)}},refreshList(){this.retrieveContacts(),this.activeIndex=-1},async removeAllContacts(){if(confirm("Bạn muốn xóa tất cả Liên hệ?"))try{await B.deleteAll(),this.refreshList()}catch(s){console.log(s)}},goToAddContact(){this.$router.push({name:"contact.add"})}},mounted(){this.refreshList()}},_=s=>(L("data-v-a96afbad"),s=s(),N(),s),ut={class:"page row"},_t={class:"col-md-10"},mt={class:"mt-3 col-md-6"},ht=_(()=>t("h4",null,[c(" Danh bạ "),t("i",{class:"fas fa-address-book"})],-1)),pt={key:1},ft={class:"mt-3 row justify-content-around align-items-center"},vt=_(()=>t("i",{class:"fas fa-redo"},null,-1)),Ct=_(()=>t("i",{class:"fas fa-plus"},null,-1)),gt=_(()=>t("i",{class:"fas fa-trash"},null,-1)),yt={class:"mt-3 col-md-6"},bt={key:0},xt=_(()=>t("h4",null,[c(" Chi tiết Liên hệ "),t("i",{class:"fas fa-address-card"})],-1)),It=_(()=>t("span",{class:"mt-2 badge badge-warning"},[t("i",{class:"fas fa-edit"}),c(" Hiệu chỉnh")],-1));function kt(s,e,o,m,d,n){const i=h("InputSearch"),p=h("ContactList"),C=h("ContactCard"),b=h("router-link"),x=h("router-view");return a(),r(g,null,[t("div",ut,[t("div",_t,[f(i,{modelValue:d.searchText,"onUpdate:modelValue":e[0]||(e[0]=l=>d.searchText=l)},null,8,["modelValue"])]),t("div",mt,[ht,n.filteredContactsCount>0?(a(),V(p,{key:0,contacts:n.filteredContacts,activeIndex:d.activeIndex,"onUpdate:activeIndex":e[1]||(e[1]=l=>d.activeIndex=l)},null,8,["contacts","activeIndex"])):(a(),r("p",pt,"Không có liên hệ nào.")),t("div",ft,[t("button",{class:"btn btn-sm btn-primary",onClick:e[2]||(e[2]=l=>n.refreshList())},[vt,c(" Làm mới ")]),t("button",{class:"btn btn-sm btn-success",onClick:e[3]||(e[3]=(...l)=>n.goToAddContact&&n.goToAddContact(...l))},[Ct,c(" Thêm mới ")]),t("button",{class:"btn btn-sm btn-danger",onClick:e[4]||(e[4]=(...l)=>n.removeAllContacts&&n.removeAllContacts(...l))},[gt,c(" Xóa tất cả ")])])]),t("div",yt,[n.activeContact?(a(),r("div",bt,[xt,f(C,{contact:n.activeContact},null,8,["contact"]),f(b,{to:{name:"contact.edit",params:{id:n.activeContact._id}}},{default:w(()=>[It]),_:1},8,["to"])])):T("",!0)])]),f(x)],64)}const At=v(lt,[["render",kt],["__scopeId","data-v-a96afbad"]]);export{At as default};
